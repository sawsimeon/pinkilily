{% extends 'base.html' %}
{% block title %}Enter Secret Key{% endblock %}
{% block content %}
    <h1>Enter Secret Key</h1>
    <form method="POST" 
          action="{% if action == 'delete' %}{{ url_for('delete_post', post_id=post_id) }}{% elif action == 'edit' %}{{ url_for('edit_post', post_id=post_id) }}{% else %}{{ url_for('add_post') }}{% endif %}" 
          {% if action == 'add' or action == 'edit' %}enctype="multipart/form-data"{% endif %}>
        <label for="secret_key">Secret Key:</label>
        <input type="text" id="secret_key" name="secret_key" placeholder="Enter secret key" required>
        {% if action == 'add' or action == 'edit' %}
            {{ form.hidden_tag() }}
            <div>
                {{ form.title.label }} {{ form.title() }}
                {% if form.title.errors %}
                    {% for error in form.title.errors %}
                        <span class="error">{{ error }}</span>
                    {% endfor %}
                {% endif %}
            </div>
            <div>
                {{ form.content.label }} {{ form.content() }}
                {% if form.content.errors %}
                    {% for error in form.content.errors %}
                        <span class="error">{{ error }}</span>
                    {% endfor %}
                {% endif %}
            </div>
            <div>
                {{ form.media.label }} {{ form.media() }}
                {% if form.media.errors %}
                    {% for error in form.media.errors %}
                        <span class="error">{{ error }}</span>
                    {% endfor %}
                {% endif %}
            </div>
        {% endif %}
        <button type="submit">Submit</button>
    </form>
    <a href="{{ url_for('index') }}">Back to Home</a>
{% endblock %}